<h1>ユーザー詳細</h1>
<%= attachment_image_tag @user, :profile_image, :fill, 100, 100, format: 'jpeg', fallback: "no_image.jpg" %>
<h4><%= @user.name %></h4>
<p><%= @user.introduction %></p>
<% if @user.id == current_user.id %>
	<%= link_to "編集", edit_user_path(@user), class: "btn btn-primary" %>
<% end %>

<h2>記事一覧</h2>
<% @posts.each do |post| %>
	<%= attachment_image_tag post.user, :profile_image, :fill, 60, 60, format: 'jpeg', fallback: "no_image.jpg", size: "60x60" %>
	<strong><%= @user.name %></strong><br>
	<i class="fas fa-heart icon-red"></i>
	<%= post.likes.count %>
	<%= post.created_at.strftime("%Y/%m/%d/ %H:%M") %><br>
  <%= link_to post_path(post) do %>
	<%= attachment_image_tag post, :image, :fill, 400, 300, format: 'jpeg' %>
  <% end %>
	<h4><%= post.title %></h4>
	<p><%= post.body %></p>
	<%= link_to "詳細", post_path(post), class: "btn btn-primary" %>
	<p>------------------------------------------------------------------</p>
<% end %>

<%= paginate @posts %>

<% if @user.id == current_user.id %>
<h2>お気に入り</h2>
	<% @likes.each do |like| %>
	  <% post = Post.find(like.post_id) %>
	  	<%= attachment_image_tag post.user, :profile_image, :fill, 60, 60, format: 'jpeg', fallback: "no_image.jpg", size: "60x60" %>
	  	<strong><%= post.user.name %></strong><br>
	  	<i class="fas fa-heart icon-red"></i>
	  	<%= post.likes.count %>
	  	<%= post.created_at.strftime("%Y/%m/%d %H:%M") %><br>
	  	<%= link_to post_path(post) do %>
			<%= attachment_image_tag post, :image, :fill, 400, 300, format: 'jpeg' %>
		<% end %>
		<h4><%= post.title %></h4>
		<p><%= post.body %></p>
		<%= link_to "詳細", post_path(post), class: "btn btn-primary" %>
		<p>------------------------------------------------------------------------</p>
	<% end %>
	<%= paginate @likes %>
<% end %>
